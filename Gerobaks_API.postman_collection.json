{
	"info": {
		"_postman_id": "gerobaks-api-collection-2025",
		"name": "Gerobaks API Collection",
		"description": "Complete API Collection for Gerobaks Waste Management System\n\nRepository: https://github.com/fk0u/gerobackend\nDeveloper: @fk0u\nVersion: 1.0.0",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{access_token}}",
				"type": "string"
			}
		]
	},
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Register",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Test User\",\n  \"email\": \"testuser@example.com\",\n  \"password\": \"password123\",\n  \"password_confirmation\": \"password123\",\n  \"phone\": \"08123456789\",\n  \"role\": \"end_user\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/register",
							"host": ["{{base_url}}"],
							"path": ["register"]
						}
					}
				},
				{
					"name": "Login End User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.data && jsonData.data.token) {",
									"    pm.environment.set(\"access_token\", jsonData.data.token);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"daffa@gmail.com\",\n  \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/login",
							"host": ["{{base_url}}"],
							"path": ["login"]
						}
					}
				},
				{
					"name": "Login Mitra",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.data && jsonData.data.token) {",
									"    pm.environment.set(\"access_token\", jsonData.data.token);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"driver.jakarta@gerobaks.com\",\n  \"password\": \"mitra123\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/login",
							"host": ["{{base_url}}"],
							"path": ["login"]
						}
					}
				},
				{
					"name": "Get Current User",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/auth/me",
							"host": ["{{base_url}}"],
							"path": ["auth", "me"]
						}
					}
				},
				{
					"name": "Logout",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/auth/logout",
							"host": ["{{base_url}}"],
							"path": ["auth", "logout"]
						}
					}
				}
			]
		},
		{
			"name": "User Management",
			"item": [
				{
					"name": "Update Profile",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Updated Name\",\n  \"phone\": \"08123456789\",\n  \"address\": \"Jl. Merdeka No. 123\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/user/update-profile",
							"host": ["{{base_url}}"],
							"path": ["user", "update-profile"]
						}
					}
				},
				{
					"name": "Change Password",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"current_password\": \"password123\",\n  \"new_password\": \"newpassword123\",\n  \"new_password_confirmation\": \"newpassword123\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/user/change-password",
							"host": ["{{base_url}}"],
							"path": ["user", "change-password"]
						}
					}
				}
			]
		},
		{
			"name": "Schedules",
			"item": [
				{
					"name": "Get All Schedules",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/schedules?status=pending&per_page=10",
							"host": ["{{base_url}}"],
							"path": ["schedules"],
							"query": [
								{
									"key": "status",
									"value": "pending"
								},
								{
									"key": "per_page",
									"value": "10"
								}
							]
						}
					}
				},
				{
					"name": "Get Schedule by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/schedules/1",
							"host": ["{{base_url}}"],
							"path": ["schedules", "1"]
						}
					}
				},
				{
					"name": "Create Schedule (Mobile Format)",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"alamat\": \"Jl. Merdeka No. 123, Jakarta Pusat\",\n  \"tanggal\": \"2025-11-01\",\n  \"waktu\": \"08:00\",\n  \"catatan\": \"Tolong ambil di depan rumah\",\n  \"koordinat\": {\n    \"lat\": -6.200000,\n    \"lng\": 106.816667\n  },\n  \"jenis_layanan\": \"pickup_sampah_organik\",\n  \"metode_pembayaran\": \"cash\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/schedules/mobile",
							"host": ["{{base_url}}"],
							"path": ["schedules", "mobile"]
						}
					}
				},
				{
					"name": "Create Schedule (Standard)",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"service_type\": \"pickup_sampah_organik\",\n  \"pickup_address\": \"Jl. Merdeka No. 123, Jakarta Pusat\",\n  \"pickup_latitude\": -6.200000,\n  \"pickup_longitude\": 106.816667,\n  \"scheduled_at\": \"2025-11-01T08:00:00\",\n  \"estimated_duration\": 30,\n  \"notes\": \"Tolong ambil di depan rumah\",\n  \"payment_method\": \"cash\",\n  \"price\": 15000\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/schedules",
							"host": ["{{base_url}}"],
							"path": ["schedules"]
						}
					}
				},
				{
					"name": "Update Schedule",
					"request": {
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"confirmed\",\n  \"mitra_id\": 10\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/schedules/1",
							"host": ["{{base_url}}"],
							"path": ["schedules", "1"]
						}
					}
				},
				{
					"name": "Complete Schedule",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"completion_notes\": \"Sampah berhasil diambil\",\n  \"actual_duration\": 25\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/schedules/1/complete",
							"host": ["{{base_url}}"],
							"path": ["schedules", "1", "complete"]
						}
					}
				},
				{
					"name": "Cancel Schedule",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"cancellation_reason\": \"Customer request\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/schedules/1/cancel",
							"host": ["{{base_url}}"],
							"path": ["schedules", "1", "cancel"]
						}
					}
				}
			]
		},
		{
			"name": "Tracking",
			"item": [
				{
					"name": "Get Tracking Data",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/tracking?schedule_id=1",
							"host": ["{{base_url}}"],
							"path": ["tracking"],
							"query": [
								{
									"key": "schedule_id",
									"value": "1"
								}
							]
						}
					}
				},
				{
					"name": "Create Tracking Point",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"schedule_id\": 1,\n  \"latitude\": -6.200100,\n  \"longitude\": 106.816700,\n  \"speed\": 25.5,\n  \"bearing\": 180,\n  \"accuracy\": 5.0\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/tracking",
							"host": ["{{base_url}}"],
							"path": ["tracking"]
						}
					}
				},
				{
					"name": "Get Tracking by Schedule",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/tracking/schedule/1",
							"host": ["{{base_url}}"],
							"path": ["tracking", "schedule", "1"]
						}
					}
				}
			]
		},
		{
			"name": "Balance",
			"item": [
				{
					"name": "Get Balance Summary",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/balance/summary",
							"host": ["{{base_url}}"],
							"path": ["balance", "summary"]
						}
					}
				},
				{
					"name": "Top Up Balance",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"amount\": 50000,\n  \"method\": \"transfer\",\n  \"reference\": \"TRF123456\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/balance/topup",
							"host": ["{{base_url}}"],
							"path": ["balance", "topup"]
						}
					}
				},
				{
					"name": "Withdraw Balance",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"amount\": 25000,\n  \"bank_account\": \"1234567890\",\n  \"bank_name\": \"BCA\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/balance/withdraw",
							"host": ["{{base_url}}"],
							"path": ["balance", "withdraw"]
						}
					}
				}
			]
		},
		{
			"name": "Ratings",
			"item": [
				{
					"name": "Get Ratings",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/ratings?mitra_id=10",
							"host": ["{{base_url}}"],
							"path": ["ratings"],
							"query": [
								{
									"key": "mitra_id",
									"value": "10"
								}
							]
						}
					}
				},
				{
					"name": "Create Rating",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"schedule_id\": 1,\n  \"mitra_id\": 10,\n  \"rating\": 5,\n  \"comment\": \"Excellent service, very professional!\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/ratings",
							"host": ["{{base_url}}"],
							"path": ["ratings"]
						}
					}
				}
			]
		},
		{
			"name": "Notifications",
			"item": [
				{
					"name": "Get Notifications",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/notifications?unread=true",
							"host": ["{{base_url}}"],
							"path": ["notifications"],
							"query": [
								{
									"key": "unread",
									"value": "true"
								}
							]
						}
					}
				},
				{
					"name": "Mark as Read",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"notification_ids\": [1, 2, 3]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/notifications/mark-read",
							"host": ["{{base_url}}"],
							"path": ["notifications", "mark-read"]
						}
					}
				}
			]
		},
		{
			"name": "Chat",
			"item": [
				{
					"name": "Get Messages",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/chats?with_user_id=10",
							"host": ["{{base_url}}"],
							"path": ["chats"],
							"query": [
								{
									"key": "with_user_id",
									"value": "10"
								}
							]
						}
					}
				},
				{
					"name": "Send Message",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"receiver_id\": 10,\n  \"message\": \"I'm on the way\",\n  \"schedule_id\": 1\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/chats",
							"host": ["{{base_url}}"],
							"path": ["chats"]
						}
					}
				}
			]
		},
		{
			"name": "Feedback",
			"item": [
				{
					"name": "Get Feedback",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/feedback",
							"host": ["{{base_url}}"],
							"path": ["feedback"]
						}
					}
				},
				{
					"name": "Submit Feedback",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"category\": \"service\",\n  \"subject\": \"Improvement suggestion\",\n  \"message\": \"Please add dark mode feature\",\n  \"rating\": 4\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/feedback",
							"host": ["{{base_url}}"],
							"path": ["feedback"]
						}
					}
				}
			]
		},
		{
			"name": "Admin",
			"item": [
				{
					"name": "Get Statistics",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/admin/stats",
							"host": ["{{base_url}}"],
							"path": ["admin", "stats"]
						}
					}
				},
				{
					"name": "Get All Users",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/admin/users?role=end_user&per_page=20",
							"host": ["{{base_url}}"],
							"path": ["admin", "users"],
							"query": [
								{
									"key": "role",
									"value": "end_user"
								},
								{
									"key": "per_page",
									"value": "20"
								}
							]
						}
					}
				}
			]
		},
		{
			"name": "Health Check",
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/health",
					"host": ["{{base_url}}"],
					"path": ["health"]
				}
			}
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "https://gerobaks.dumeg.com/api",
			"type": "string"
		},
		{
			"key": "access_token",
			"value": "",
			"type": "string"
		}
	]
}
